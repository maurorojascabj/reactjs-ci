language: node_js
node_js:
- stable
cache:
  directories:
  - node_modules
jobs:
  include:
  - stage: deploy to production
    script: npm run build
    deploy:
      provider: heroku
      cleanup: true
      api_key: "$HEROKU_API_KEY"
      strategy: git
      app: reactjs-ci
      on:
        branch: master
notifications:
  slack:
    rooms:
      - secure: d3NsAuw+IVhcpBD0r7ee9dFHS2MV+bvLDRa+lSScpmfaAeDjkCBQK0+YoHGHtKXoeFd3eU62KdSm8n+5MXu/oOHJxKlrCFZQqaAxXMX2IDwNlb/ngTs1CrIfzazu2BCsRIRiHaEobe1Ucna66RHwmlrZ7iFWOyLRgQf/UAq6oJf2o+Ut70rJkiUHJ4qtAJ3yeGBiQ1BMC6ebVEkYlK/9zCQYMp8j7ji1lTuqaq/jmYpXY2gT3lnfGL7lHOu2TsQkC4fXXd0OuNP2SG1h9bcrFuhw4mYXN2AcVgjumzWc4L3gPLpDiLbaev53G0b0ef632ivc4LuzBITmAXbcUpVx3TgzIhKAch9p/vawbPw9ssdxLnY7sB2S00Nd2/9Gnbhq4BqtLc2C0Gc7rpP6XZi3OdTDTzp4hpqnFLAbrF7Kp6Div8YKvt6H9dHW3+JWA3pEZ6VekdUrM2J4/Ozf5PJcSPBTfMTlGZJAoqNHSln2c/FyIdrmCpwIr/wTCJhkFA5oV4pJEgg0UoRXS60BBKw7ZKYZK2LpyQRH5Ti8+r8+Gq8lkjKj6uF9TvNrRzb10yak7mO+bjRGG57fGeGtdWBFmzf1MunQwaozu/nH0PzzfTeChMC4DfAw9UpDVEKJJkF9VS9bcZjdTtCxLTXQsYVbaqTUQ0DRJF5M2T0vUxuFxdw=
    on_success: always
    on_failure: always 