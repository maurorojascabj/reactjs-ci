language: node_js
node_js:
- stable
cache:
  directories:
  - node_modules
jobs:
  include:
  - stage: code inspection
    addons:
      sonarcloud:
        organization: "maurorojascabj" # the key of the org you chose at step #3
        token:
          secure: "$SONAR_TOKEN" # encrypted value of your token
    script:
      # other script steps might be done before running the actual analysis
      - sonar-scanner
  - stage: deploy to production
    script: npm run build
    deploy:
      provider: heroku
      cleanup: true
      api_key: "$HEROKU_API_KEY"
      strategy: git
      app: reactjs-ci
      on:
        branch: master
notifications:
  slack: ingenieriasof-97b7969:leLR2neDDHJhQqfmGqu8D1nF